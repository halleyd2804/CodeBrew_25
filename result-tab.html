<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Crop Suggestions</title>
  <link rel="stylesheet" href="result-tab.css" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
</head>
<body>
  <div class="container">
    <h1 class="fade-in">Crop Suggestions</h1>

    <div class="crop-grid" id="crop-grid">
    </div>
  </div>

  <script>
    async function getCrops() {
      try {
        const response = await fetch('http://localhost:5000/api/plants');
        if (!response.ok) {
          throw new Error('Failed to fetch plant data');
        }
        const crops = await response.json(); 

        const cropGrid = document.getElementById('crop-grid');

        for (let crop of crops) {
            const cropDataResponse = await fetch(`http://localhost:5000/api/plants/${encodeURIComponent(crop)}`);
            const cropData = await cropDataResponse.json();
            const cropCard = document.createElement('div');
            cropCard.classList.add('crop-card', 'slide-up');
            
            cropCard.innerHTML = `
            <h2>${cropData.name}</h2>
            <p><strong>Guide:</strong> ${cropData.sunlight} | ${cropData.water} | Growing time: ${cropData.growing_time}</p>
            <p><strong>Warnings:</strong> ${cropData.warning.join(', ')}</p>
            <p><strong>Nutrition:</strong> ${cropData.nutrition.join(', ')}</p>
            `;

            cropGrid.appendChild(cropCard);
        }
      } catch (error) {
        console.error('Error fetching crop data:', error);
      }
    }

    window.onload = getCrops;
  </script>
</body>
</html>
